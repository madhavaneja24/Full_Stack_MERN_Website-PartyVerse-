{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\madha\\\\OneDrive\\\\Desktop\\\\Projects\\\\the_party_shop\\\\client\\\\src\\\\pages\\\\Cart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport API from '../api';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Cart() {\n  _s();\n  const [cart, setCart] = useState(null);\n  const token = localStorage.getItem('token');\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (token) {\n      API.get('/cart', {\n        headers: {\n          Authorization: 'Bearer ' + token\n        }\n      }).then(r => setCart(r.data)).catch(e => {\n        var _e$response;\n        if (((_e$response = e.response) === null || _e$response === void 0 ? void 0 : _e$response.status) === 401) {\n          localStorage.removeItem('token');\n          localStorage.removeItem('user');\n          navigate('/login');\n        } else {\n          console.error(e);\n        }\n      });\n    }\n  }, [token, navigate]);\n  const updateQty = async (productId, qty) => {\n    try {\n      await API.post('/cart/add', {\n        productId,\n        qty\n      }, {\n        headers: {\n          Authorization: 'Bearer ' + token\n        }\n      });\n      const r = await API.get('/cart', {\n        headers: {\n          Authorization: 'Bearer ' + token\n        }\n      });\n      setCart(r.data);\n    } catch (e) {\n      var _e$response2;\n      if (((_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : _e$response2.status) === 401) {\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        navigate('/login');\n      } else {\n        console.error(e);\n      }\n    }\n  };\n  if (!token) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-white rounded\",\n    children: \"Please login to view cart\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 21\n  }, this);\n  if (!cart) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading cart...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 20\n  }, this);\n  const items = cart.items.filter(i => i && i.product); // safeguard\n  const subtotal = items.reduce((s, it) => s + it.product.price * it.qty, 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full mx-auto bg-white rounded shadow p-6\",\n    style: {\n      maxWidth: '800px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-semibold mb-4\",\n      children: \"Your Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: [items.length === 0 && /*#__PURE__*/_jsxDEV(\"li\", {\n        children: \"Cart is empty\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 30\n      }, this), items.map(it => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"flex items-center gap-4 py-3 border-b\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: it.product.image,\n          style: {\n            width: 80,\n            height: 80,\n            objectFit: 'contain'\n          },\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: it.product.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: [\"\\u20B9\", it.product.price.toFixed(0)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            className: \"border rounded p-1 w-20\",\n            value: it.qty,\n            onChange: e => updateQty(it.product._id, Number(e.target.value))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this)]\n      }, it.product._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-lg font-semibold\",\n        children: [\"Subtotal: \\u20B9\", subtotal.toFixed(0)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/checkout'),\n        className: \"bg-green-600 text-white px-4 py-2 rounded\",\n        children: \"Proceed to Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(Cart, \"LcqwfmNJaIShFg2L1yHKylbv7CI=\", false, function () {\n  return [useNavigate];\n});\n_c = Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useEffect","useState","API","useNavigate","jsxDEV","_jsxDEV","Cart","_s","cart","setCart","token","localStorage","getItem","navigate","get","headers","Authorization","then","r","data","catch","e","_e$response","response","status","removeItem","console","error","updateQty","productId","qty","post","_e$response2","className","children","fileName","_jsxFileName","lineNumber","columnNumber","items","filter","i","product","subtotal","reduce","s","it","price","style","maxWidth","length","map","src","image","width","height","objectFit","alt","title","toFixed","type","value","onChange","_id","Number","target","onClick","_c","$RefreshReg$"],"sources":["C:/Users/madha/OneDrive/Desktop/Projects/the_party_shop/client/src/pages/Cart.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport API from '../api';\nimport { useNavigate } from 'react-router-dom';\nexport default function Cart(){\n  const [cart, setCart] = useState(null);\n  const token = localStorage.getItem('token');\n  const navigate = useNavigate();\n\n  useEffect(()=>{\n    if(token){\n      API.get('/cart', {headers:{Authorization:'Bearer '+token}})\n        .then(r=>setCart(r.data))\n        .catch(e=>{\n          if(e.response?.status === 401){\n            localStorage.removeItem('token');\n            localStorage.removeItem('user');\n            navigate('/login');\n          } else {\n            console.error(e);\n          }\n        });\n    }\n  },[token, navigate]);\n\n  const updateQty = async (productId, qty)=> {\n    try{\n      await API.post('/cart/add', {productId, qty}, {headers:{Authorization:'Bearer '+token}});\n      const r = await API.get('/cart', {headers:{Authorization:'Bearer '+token}});\n      setCart(r.data);\n    }catch(e){\n      if(e.response?.status === 401){\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        navigate('/login');\n      } else {\n        console.error(e);\n      }\n    }\n  };\n\n  if(!token) return <div className=\"p-6 bg-white rounded\">Please login to view cart</div>;\n  if(!cart) return <div>Loading cart...</div>;\n\n  const items = cart.items.filter(i => i && i.product); // safeguard\n  const subtotal = items.reduce((s,it)=>s + (it.product.price * it.qty), 0);\n\n  return (\n    <div className=\"w-full mx-auto bg-white rounded shadow p-6\" style={{maxWidth: '800px'}}>\n      <h2 className=\"text-xl font-semibold mb-4\">Your Cart</h2>\n      <ul>\n        {items.length===0 && <li>Cart is empty</li>}\n        {items.map(it=>(\n          <li key={it.product._id} className=\"flex items-center gap-4 py-3 border-b\">\n            <img src={it.product.image} style={{width:80,height:80,objectFit:'contain'}} alt=\"\"/>\n            <div className=\"flex-1\">\n              <strong>{it.product.title}</strong>\n              <div className=\"text-sm text-gray-500\">₹{it.product.price.toFixed(0)}</div>\n            </div>\n            <div>\n              <input type=\"number\" className=\"border rounded p-1 w-20\" value={it.qty} onChange={(e)=>updateQty(it.product._id, Number(e.target.value))} />\n            </div>\n          </li>\n        ))}\n      </ul>\n      <div className=\"mt-4 flex justify-between items-center\">\n        <div className=\"text-lg font-semibold\">Subtotal: ₹{subtotal.toFixed(0)}</div>\n        <button onClick={()=>navigate('/checkout')} className=\"bg-green-600 text-white px-4 py-2 rounded\">Proceed to Checkout</button>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}